<html>
<head>
<script type="text/javascript">
var but = [[7,8,9,'/'], [4,5,6,'*'], [1,2,3,'-'],[0,'C','=','+']];

</script>

<body>
<script type="text/javascript">
var status = 1
	var x = 0
	var y = 0
	var opp = '='

// Создание формы калькулятора
document.write ("<form name='calculator'>")
document.write("<input type='text' value='0' name='display' style='width:100; height:25;'/>");

for(var i = 0; i < but.length; i++)
{
    document.write("<div>");
    for(var j = 0; j < but[i].length; j++)
    {
	if (typeof but[i][j]=="number")
		{
       document.write("<input type='button' value='" + but[i][j] + "' style='width:25; height:25;' onclick='Numbers(" + but[i][j] + ")'/>");
	   }
	   else if  (but[i][j]=="C")
	   {
	   document.write("<input type='button' value='" + but[i][j] + "' style='width:25; height:25;' onclick='clearDisplay()'/>");
	   }
	   else
	   {
	   document.write("<input type='button' value='" + but[i][j] + "' style='width:25; height:25;' onclick='Operations(this)'/>");
	   }
    }
    document.write("</div>");
}
document.write ("</form>")
//--------------------

// Действия калькулятора
	function Operations(op)
	{
		y = parseFloat(document.calculator.display.value)
		
		switch(opp)
		{
			case '+':
			x = x + y
			break;
			case '-':
			x = x - y
			break;
			case '/':
			x = x / y
			break;
			case '*':
			x = x * y
			break;
			case '=':
			x = y
		}
		if (y==0 && opp=='/')
			{
				document.calculator.display.value='Ат-та-та!!!'
				opp='='
				x=0;
				y=0;
			}
		else 
		{
				document.calculator.display.value = x
		}
		status = 1
		opp = op.value
	}
		
	function clearDisplay()
	{
		document.calculator.display.value = 0
		status = 1
		x = 0
		y = 0
		opp = '='
	}
	
	function Numbers(num)
	{
		if (status == 1)
		{
			document.calculator.display.value = num
			if(document.calculator.display.value != 0)
			{
				status = 0
			}
		}
		else
		{
			document.calculator.display.value = document.calculator.display.value + num
		}
	}


</script>
</body>
</html>